function amps = get_amps(thrust, design)

% INPUTS:
% thrust: Required thrust in Newtons for each motor given the design
% design: Array of the design variables in integer representations

% design = [motor_code, prop_blade_code, n_blades_code, n_cells_code,
%           n_motors_code, bat_cap_code]

% motor codes:
% 1 = KDE7208XF-135
% 2 = KDE6213XF-185
% 3 = KDE5215XF-220
% 4 = KDE5215XF-330

% prop blade codes:
% 1 = KDE 30.5"
% 2 = KDE 27.5"
% 3 = KDE 24.5"
% 4 = KDE 21.5"
% 5 = KDE 18.5"
% 6 = KDE 15.5"

% n blades codes:
% 1 = dual-blade
% 2 = triple-blade

% n cells codes:
% 1 = 4S
% 2 = 6S
% 3 = 8S
% 4 = 10S
% 5 = 12S

% n motors codes:
% 1 = 4 (quad)
% 2 = 6 (hex)
% 3 = 8 (octo)

% bat_cap_codes
% 1 = 23,000 mAh
% 2 = 22,000 mAh
% 3 = 17,000 mAh
% 4 = 16,000 mAh

% get the first 4 elements of design that represent the power system
design = design(1:4);

% convert to a number code
str = sprintf('%d%d%d%d', design(1), design(2), design(3), design(4));
design_code = str2double(str);


switch design_code
    
    % Test data from KDE Direct
    % Thr = [...] are KDE's Thrust measurements in Newtons
    % Amp = [...] are KDE's current measurements in Amps
    
    % Cases for motor 1:
    case 1312
        Thr = [2.75, 5.69, 9.90, 14.81, 19.81, 25.6, 33.73];
        Amp = [0.5, 1.2, 2.4, 4.2, 6.4, 9.4, 13.1];
        
    case 1322
        Thr = [3.43, 6.96, 11.96, 17.75, 23.73, 30.11, 38.44];
        Amp = [0.6, 1.6, 3.2, 5.6, 8.7, 12.8, 17.5];
        
    case 1212
        Thr = [4.02, 8.63, 14.42, 20.99, 28.54, 36.48, 45.70];
        Amp = [0.6, 1.7, 3.7, 6.4, 10.0, 14.4, 19.2];
        
    case 1222
        Thr = [4.81, 10.20, 16.97, 24.81, 32.56, 40.70, 49.43];
        Amp = [0.8, 2.3, 4.7, 8.5, 12.8, 18.1, 24.2];
        
    case 1112
        Thr = [5.69, 11.38, 19.32, 26.67, 35.89, 44.42, 56.00];
        Amp = [0.8, 2.3, 5.2, 8.4, 13.6, 19.3, 26.8];
        
    case 1313
        Thr = [4.81, 9.32, 16.28, 24.61, 33.15, 41.87, 53.25];
        Amp = [0.7, 1.9, 3.6, 6.8, 10.3, 14.8, 20.3];
        
    case 1323
        Thr = [5.98, 11.57, 20.20, 28.34, 37.46, 46.68, 58.84];
        Amp = [0.8, 2.3, 5.2, 8.7, 13.9, 19.9, 27.0];
        
    case 1213
        Thr = [6.86, 14.71, 23.54, 34.52, 45.31, 54.92, 63.37];
        Amp = [1.1, 2.9, 5.7, 10.1, 15.6, 22.4, 29.3];
        
    case 1223
        Thr = [8.04, 17.16, 27.56, 38.64, 49.43, 59.43, 73.06];
        Amp = [1.3, 3.6, 7.5, 13.2, 19.5, 27.6, 35.8];
        
    case 1314
        Thr = [7.45, 14.71, 25.11, 36.38, 45.40, 59.33, 74.04];
        Amp = [1.1, 2.6, 5.6, 9.6, 13.1, 20.8, 29.1];
        
    case 1324
        Thr = [8.92, 17.55, 29.22, 41.48, 51.98, 64.23, 76.88];
        Amp = [1.3, 3.4, 7.6, 13.1, 19.8, 26.6, 40.6];
        
    case 1214
        Thr = [10.40, 21.18, 33.73, 47.37, 59.43, 69.04, 80.22];
        Amp = [1.5, 4.0, 8.1, 14.5, 22.3, 32.9, 42.1];
        
    case 1315
        Thr = [10.79, 19.61, 32.95, 45.31, 62.86, 78.85, 88.75];
        Amp = [1.5, 3.3, 6.9, 10.9, 19.4, 29.6, 40.1];
    
    % Cases for motor 2:
    case 2512
        Thr = [2.16, 4.22, 6.86, 10.20, 13.73, 17.65, 23.05];
        Amp = [0.6, 1.2, 2.1, 3.4, 5.1, 7.3, 9.9];
        
    case 2522
        Thr = [2.55, 5.20, 8.43, 12.55, 16.87, 21.67, 28.24];
        Amp = [0.7, 1.5, 2.6, 4.4, 6.7, 9.7, 13.2];
        
    case 2412
        Thr = [3.92, 7.45, 11.96, 17.36, 23.34, 30.50, 38.74];
        Amp = [0.9, 1.9, 3.6, 6.1, 9.5, 13.9, 18.2];
        
    case 2422
        Thr = [4.61, 8.83, 14.42, 20.79, 27.46, 35.89, 45.90];
        Amp = [1.0, 2.2, 4.5, 7.9, 11.8, 16.8, 23.5];
        
    case 2312
        Thr = [5.69, 10.30, 16.97, 25.01, 32.75, 41.78, 52.96];
        Amp = [1.2, 2.6, 5.2, 9.1, 13.4, 19.4, 25.9];
        
    case 2322
        Thr = [6.77, 12.36, 20.20, 28.44, 37.36, 45.99, 57.47];
        Amp = [1.5, 3.3, 6.9, 11.4, 17.5, 24.7, 33.2];
        
    case 2513
        Thr = [4.12, 7.26, 11.57, 16.48, 22.36, 30.11, 38.34];
        Amp = [0.9, 1.8, 3.1, 5.1, 7.9, 11.7, 15.5];
        
    case 2523
        Thr = [4.61, 8.34, 13.73, 19.91, 26.97, 35.99, 46.09];
        Amp = [1.1, 2.1, 4.0, 6.5, 9.9, 14.7, 20.1];
        
    case 2413
        Thr = [6.28, 11.87, 19.22, 28.24, 37.66, 47.37, 61.19];
        Amp = [1.2, 2.8, 5.6, 9.5, 14.2, 20.1, 28.3];
        
    case 2423
        Thr = [7.55, 14.42, 22.65, 33.05, 43.15, 54.33, 70.51];
        Amp = [1.5, 3.5, 6.8, 11.8, 17.1, 24.2, 35.2];
        
    case 2313
        Thr = [9.02, 16.77, 26.67, 39.32, 50.50, 64.63, 79.73];
        Amp = [1.8, 3.9, 7.7, 13.7, 19.7, 29.2, 38.8];
        
    case 2323
        Thr = [10.89, 20.50, 32.17, 43.93, 56.68, 70.71, 85.71];
        Amp = [2.2, 5.4, 10.6, 17.0, 26.6, 39.0, 51.1];
        
    case 2514
        Thr = [6.28, 10.49, 16.57, 23.54, 34.23, 43.44, 55.02];
        Amp = [1.2, 2.3, 4.3, 6.8, 11.2, 16.0, 21.4];
        
    case 2524
        Thr = [7.06, 12.45, 19.91, 28.15, 40.99, 52.27, 65.41];
        Amp = [1.4, 2.9, 5.4, 8.6, 14.7, 21.7, 28.0];
        
    case 2414
        Thr = [9.12, 17.36, 28.44, 40.01, 54.03, 67.47, 85.81];
        Amp = [1.6, 3.8, 7.6, 12.5, 19.4, 28.3, 39.2];
        
    case 2424
        Thr = [10.89, 21.08, 33.54, 45.01, 60.80, 76.10, 96.50];
        Amp = [2.0, 5.0, 9.9, 15.1, 22.9, 36.2, 50.8];
        
    case 2314
        Thr = [13.04, 25.11, 40.21, 53.45, 70.51, 89.34, 106.99];
        Amp = [2.3, 5.7, 11.3, 17.3, 27.0, 43.3, 57.1];
        
    case 2324
        Thr = [15.69, 28.44, 43.54, 57.96, 74.53, 95.12, 113.86];
        Amp = [3.0, 7.1, 13.8, 21.5, 34.3, 50.0, 69.9];
        
    case 2515
        Thr = [8.43, 14.22, 22.06, 34.03, 45.21, 58.74, 74.53];
        Amp = [1.6, 3.0, 5.3, 9.5, 14.4, 20.6, 28.3];
        
    case 2525
        Thr = [9.81, 17.06, 26.87, 41.78, 54.52, 71.10, 86.00];
        Amp = [1.8, 3.7, 6.9, 12.8, 18.9, 28.5, 36.6];
        
    case 2415
        Thr = [12.75, 23.93, 37.27, 52.56, 71.29, 91.40, 106.89];
        Amp = [2.1, 5.1, 9.6, 16.0, 25.8, 40.2, 51.4];
        
    case 2425
        Thr = [14.91, 27.36, 42.07, 58.94, 79.63, 100.03, 116.99];
        Amp = [2.6, 6.1, 11.4, 19.1, 33.9, 45.1, 59.1];
        
    case 2315
        Thr = [17.95, 33.24, 49.92, 69.82, 90.61, 107.28, 126.31];
        Amp = [3.1, 6.9, 13.0, 22.2, 37.8, 52.7, 76.2];
        
    % Cases for motor 3:
    case 3512
        Thr = [2.45, 4.41, 6.96, 10.30, 14.02, 18.83, 23.73];
        Amp = [0.7, 1.3, 2.2, 3.6, 5.4, 8.0, 10.4];
        
    case 3522
        Thr = [2.75, 5.49, 8.63, 12.75, 17.26, 22.85, 28.73];
        Amp = [0.7, 1.6, 2.8, 4.6, 6.9, 10.0, 13.7];
        
    case 3412
        Thr = [4.12, 7.55, 12.26, 18.04, 23.83, 30.40, 39.23];
        Amp = [0.9, 2.0, 3.8, 6.5, 9.7, 13.9, 18.7];
        
    case 3422
        Thr = [4.81, 9.12, 14.91, 21.57, 28.54, 36.09, 45.60];
        Amp = [1.1, 2.6, 4.9, 8.3, 12.6, 18.0, 23.8];
        
    case 3613
        Thr = [2.26, 4.41, 7.06, 10.10, 13.83, 18.53, 23.83];
        Amp = [0.6, 1.3, 2.1, 3.3, 4.8, 7.1, 9.6];
        
    case 3623
        Thr = [2.75, 5.39, 8.63, 12.36, 16.57, 22.26, 28.54];
        Amp = [0.8, 1.6, 2.7, 4.1, 6.1, 9.1, 12.3];
        
    case 3513
        Thr = [4.41, 7.55, 11.87, 17.06, 22.65, 30.20, 39.13];
        Amp = [1.0, 1.9, 3.3, 5.5, 8.1, 12.0, 16.2];
        
    case 3523
        Thr = [5.20, 8.92, 14.51, 20.69, 27.26, 36.19, 46.09];
        Amp = [1.2, 2.2, 4.3, 6.9, 10.4, 15.5, 20.6];
        
    case 3413
        Thr = [6.67, 12.26, 20.10, 28.05, 37.85, 47.46, 61.49];
        Amp = [1.4, 3.0, 5.8, 9.4, 14.7, 20.3, 28.4];
        
    case 3423
        Thr = [7.94, 15.00, 24.61, 34.13, 44.52, 54.72, 68.94];
        Amp = [1.7, 3.9, 7.3, 12.5, 18.5, 25.8, 35.0];
        
    case 3614
        Thr = [4.12, 6.67, 10.59, 15.69, 20.69, 26.87, 35.11];
        Amp = [1.0, 1.7, 2.9, 4.6, 6.8, 9.9, 13.4];
        
    case 3624
        Thr = [4.71, 8.14, 12.85, 18.93, 25.01, 32.46, 41.68];
        Amp = [1.1, 2.0, 3.6, 5.6, 8.7, 13.0, 17.0];
        
    case 3514
        Thr = [6.57, 11.18, 17.55, 24.91, 34.72, 43.93, 56.00];
        Amp = [1.3, 2.5, 4.5, 7.3, 11.6, 16.6, 22.2];
        
    case 3524
        Thr = [8.14, 13.53, 20.89, 29.52, 40.89, 51.98, 65.41];
        Amp = [1.6, 3.1, 5.6, 9.4, 15.1, 21.8, 28.2];
        
    case 3414
        Thr = [9.71, 18.14, 28.34, 40.80, 53.35, 67.47, 84.44];
        Amp = [1.8, 4.1, 7.9, 13.0, 20.1, 28.8, 37.9];
        
    case 3424
        Thr = [11.57, 21.87, 34.23, 47.76, 62.37, 78.65, 97.58];
        Amp = [2.1, 5.3, 10.3, 16.0, 24.7, 38.2, 49.7];
        
    case 3615
        Thr = [6.08, 9.51, 14.61, 21.28, 28.24, 36.87, 47.56];
        Amp = [1.3, 2.1, 3.7, 6.1, 9.1, 13.0, 17.4];
        
    case 3625
        Thr = [6.67, 11.08, 17.06, 25.40, 34.42, 44.03, 55.70];
        Amp = [1.5, 2.6, 4.4, 7.6, 11.6, 16.6, 21.9];
        
    case 3515
        Thr = [9.02, 15.20, 23.05, 34.91, 46.48, 59.13, 75.12];
        Amp = [1.7, 3.1, 5.6, 10.0, 15.1, 21.2, 28.7];
        
    case 3525
        Thr = [10.30, 17.75, 27.85, 41.68, 54.82, 69.73, 86.30];
        Amp = [1.9, 3.9, 7.2, 13.0, 19.2, 27.8, 36.7];
        
    case 3415
        Thr = [13.04, 24.91, 37.85, 53.74, 71.10, 90.91, 111.31];
        Amp = [2.3, 5.6, 10.0, 16.8, 26.0, 39.4, 51.3];
        
    % Cases for motor 4:
    case 4511
        Thr = [2.45, 5.20, 8.24, 11.96, 16.38, 21.48, 27.95];
        Amp = [1.1, 2.3, 4.1, 6.7, 10.3, 14.7, 20.3];
        
    case 4521
        Thr = [3.33, 6.28, 10.0, 14.42, 19.71, 25.60, 33.05];
        Amp = [1.3, 2.8, 5.2, 8.4, 13.0, 19.1, 26.4];
        
    case 4411
        Thr = [4.51, 8.43, 13.73, 20.01, 26.77, 35.30, 44.03];
        Amp = [1.6, 3.5, 6.9, 11.8, 18.2, 27.7, 36.4];
        
    case 4421
        Thr = [5.59, 10.30, 16.48, 23.54, 30.99, 39.42, 49.43];
        Amp = [2.0, 4.5, 9.0, 15.0, 23.2, 33.7, 45.4];
        
    case 4612
        Thr = [3.33, 6.28, 10.20, 14.81, 20.10, 27.85, 35.50];
        Amp = [1.3, 2.6, 4.6, 7.2, 10.8, 17.1, 22.5];
        
    case 4622
        Thr = [4.22, 7.75, 12.26, 17.75, 23.93, 32.46, 41.19];
        Amp = [1.6, 3.1, 5.7, 9.3, 14.2, 21.6, 29.0];
        
    case 4512
        Thr = [5.88, 10.40, 16.67, 24.12, 33.24, 43.74, 55.60];
        Amp = [2.0, 3.9, 7.3, 12.0, 19.0, 28.3, 37.9];
        
    case 4522
        Thr = [7.06, 12.45, 20.01, 28.93, 39.03, 50.99, 63.74];
        Amp = [2.3, 4.8, 9.3, 15.8, 24.1, 35.3, 48.2];
        
    case 4412
        Thr = [8.92, 17.16, 26.87, 39.32, 49.92, 63.84, 81.10];
        Amp = [2.8, 6.5, 12.5, 21.9, 32.0, 48.2, 65.5];
        
    case 4613
        Thr = [6.57, 10.59, 16.97, 25.11, 34.42, 44.33, 57.27];
        Amp = [2.2, 3.8, 6.8, 11.5, 17.9, 25.5, 35.4];
        
    case 4623
        Thr = [7.94, 12.85, 20.10, 29.32, 40.21, 52.07, 65.80];
        Amp = [2.5, 4.7, 8.4, 13.9, 22.6, 33.0, 44.5];
        
    case 4513
        Thr = [9.81, 17.75, 27.07, 38.54, 54.03, 71.10, 85.71];
        Amp = [3.0, 6.1, 11.1, 18.2, 30.0, 45.1, 57.3];
        
    case 4523
        Thr = [11.18, 20.59, 31.58, 44.52, 62.57, 79.34, 96.40];
        Amp = [3.2, 7.2, 13.5, 22.5, 38.9, 52.9, 73.1];
        
    otherwise
        Thr = [];
        Amp = [];
end

% If we have data for the given design code:
if ~isempty(Thr)
    
    Thr = Thr';
    Amp = Amp';
    
    % A matrix for LS polynomial curve fit
    A = [ones(length(Thr),1), Thr, Thr.^2, Thr.^3];
    
    % solve for coefficients of polynomial using pseudo-inverse
    x = A \ Amp;
    
    % using the polynomial curve fit, 'look up' the amps for the given thrust
    amps = x(1) + x(2)*thrust + x(3)*thrust^2 + x(4)*thrust^3;
    
else
    amps = -1;
end


end